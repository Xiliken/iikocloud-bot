# [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –±–æ—Ç–æ–º]()

# –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1.  [–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞](#–∑–∞–ø—É—Å–∫-–±–æ—Ç–∞)
2.  [–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î](#–º–∏–≥—Ä–∞—Ü–∏—è-–±–¥)
3.  [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—è–∑—ã–∫–æ–≤–æ–≥–æ-—Ñ–∞–π–ª–∞)
4.  [–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω—Ñ–∏–≥–æ–º](#–∫–∞–∫-—Ä–∞–±–æ—Ç–∞—Ç—å-—Å-–∫–æ–Ω—Ñ–∏–≥–æ–º)
    + [–¢–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ Config](#—Ç–∏–ø—ã-–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö-–∑–Ω–∞—á–µ–Ω–∏–π-–≤-config)
5. [–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ .env](#–ø—Ä–∏–º–µ—Ä-—Ñ–∞–π–ª–∞-env)
6. [–†–∞–±–æ—Ç–∞ —Å pre-commit](#—Ä–∞–±–æ—Ç–∞-—Å-pre-commit)
7. [–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏](#–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏)
8. [Todo](#todo)

## –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞


1.  –ó–∞–ø—É—Å–∫–∞–µ–º Redis, –µ—Å–ª–∏ –æ–Ω –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è: `sudo service redis-server start`

2.  –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞ –∏–∑ –ø–æ–¥ Linux: `sudo systemctl start bot`


## –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î


`alembic revision --autogenerate -m "message"` - –æ–±–Ω–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ

`alembic upgrade head` - –∑–∞–ª–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

`alembic revision -m "message"` - –æ–±–Ω–æ–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ **(–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é)**


## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞


1.   `pybabel extract --input-dirs=. -o bot/locales/messages.pot`  \- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

2.   `pybabel update -d bot/locales -D messages -i bot/locales/messages.pot`  \- –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤

3.  –ü–µ—Ä–µ–≤–æ–¥–∏–º —Ñ–∞–π–ª—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ ([PoEdit](https://poedit.net/)  –≤ –ø–æ–º–æ—â—å)

4.  `pybabel compile -d bot/locales -D messages` \- –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤


## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω—Ñ–∏–≥–æ–º

–ö–æ–Ω—Ñ–∏–≥ —Å–µ–π—á–∞—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–æ–≤–æ–ª—å–Ω–æ –∫—Ä–∏–≤–æ–≤–∞—Ç–æ, –Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º –º–æ–∂–Ω–æ. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env`. [–¢–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.](#—Ç–∏–ø—ã-–≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö-–∑–Ω–∞—á–µ–Ω–∏–π-–≤-config)


1.  –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥ –≤ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª<br>
    ```python
    from bot.mics.helpers.Config import Config
    ```

2.  –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ `get`<br>
    ```python
    Config.get("–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ —Ñ–∞–π–ª–∞ .env", "—Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è")
    ```

3.  –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ `set`
    ```python
    Config.set("–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏–∑ —Ñ–∞–π–ª–∞ .env", "–Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ")
    ```

## –¢–∏–ø—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ Config:


*   `str` - —Å—Ç—Ä–æ–∫–∞ **(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)**

*   `bool` - boolean —Ç–∏–ø

*   `list` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ list

*   `dict` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ dict

*   `int` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ int

*   `float` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ float



## –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ .env

<details>
  <summary>–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ .env.example</summary>

  ```python
  # Telegram settings
TELEGRAM_BOT_API_KEY=
NOTIFY_ADMIN_IDS=

# IikoCloud API settings
IIKOCLOUD_LOGIN=
IIKOCLOUD_ORGANIZATIONS_IDS=

# Redis Settings
REDIS_HOST=localhost
REDIS_PORT=6379

# SMS Center Settings
SMSC_LOGIN=
SMSC_PASSWORD=
SMSC_POST=False
SMSC_HTTPS=False
SMSC_CHARSET=utf-8
SMSC_DEBUG=False

# SMS Center SMTP Settings
SMSC_SMTP_FROM=
SMSC_SMTP_SERVER=
SMSC_SMTP_LOGIN=
SMSC_SMTP_PASSWORD=

# Database Settings
DATABASE_URL=sqlite+aiosqlite:///database.db
DATABASE_DEBUG=True

# Other settings
DEBUG=True
LOG_TYPE=file# File, Console
MAINTENANCE=False
  ```
</details>


## –†–∞–±–æ—Ç–∞ —Å pre-commit
–°–µ–π—á–∞—Å —Å—Ç–æ—è—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ Git-—Ö—É–∫–∏ –Ω–∞ –∫–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.
–ö–∞–∫ `commit`, —Ç–∞–∫ –∏ `push` –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å—Å—è –Ω–µ —Å—Ä–∞–∑—É, –≤ —Å–∏–ª—É —Ç–æ–≥–æ, —á—Ç–æ
—Å–∏—Å—Ç–µ–º–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ—á–µ–º—É-—Ç–æ –ø–µ—Ä–µ–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ Python. –ü–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—é
–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—É—à–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è üòÉ –ü–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é
–≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–∞—Ä—É —Ä–∞–∑ –∑–∞–ø—É—Å—Ç–∏—Ç—å `pre-commit run --all-files` - –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç
–≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç –∏—Ö. –ê –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑
—É–∂–µ –¥–æ–ª–∂–Ω–∞ –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–∞—Ö `Passed`.

–í—Å–µ —Ö—É–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ `.pre-commit-config.yaml`



## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

[Aiogram 3.x](https://docs.aiogram.dev/en/dev-3.x/)

[SQLAlchemy 2.0](https://docs.sqlalchemy.org/en/20/)

[AioCron](https://pypi.org/project/aiocron/)

## TODO:

- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ FSM –Ω–∞ [aiogram-dialog](https://aiogram-dialog.readthedocs.io/en/develop/quickstart/index.html)
- [ ] –°–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–∫—É
  -[x] –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –∞–¥–º–∏–Ω–∫–µ
  - [ ] –°–¥–µ–ª–∞—Ç—å —Ä—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–∏ –ë–î
  - [ ] –°–¥–µ–ª–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
  - [ ] –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Webhooks IikoCloud API ???
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ —Å SQLite –Ω–∞ PostgreSQL
- [ ] –°–¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
- [ ] –í—ã–≤–µ—Å—Ç–∏ —Å IikoCloud API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–æ—Ö–æ–¥–∞ ???
- [ ] –°–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å Config –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–π
